# Aè‚¡é‡åŒ–äº¤æ˜“ç³»ç»Ÿ

ä¸€ä¸ªæ¨¡å—åŒ–ã€å¯æ‰©å±•çš„Aè‚¡é‡åŒ–äº¤æ˜“æ¡†æ¶ï¼Œæ”¯æŒç­–ç•¥å›æµ‹éªŒè¯å’Œå®ç›˜è‡ªåŠ¨äº¤æ˜“ã€‚

## ğŸ¯ ç³»ç»Ÿç‰¹ç‚¹

- **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ•°æ®ã€ç­–ç•¥ã€å›æµ‹ã€äº¤æ˜“ã€ç›‘æ§ç‹¬ç«‹æ¨¡å—ï¼Œä½è€¦åˆé«˜å†…èš
- **ç­–ç•¥æŠ½è±¡**ï¼šç»Ÿä¸€çš„ç­–ç•¥åŸºç±»ï¼Œè½»æ¾æ‰©å±•æ–°ç­–ç•¥
- **åŒæ¨¡å¼è¿è¡Œ**ï¼šæ”¯æŒå›æµ‹éªŒè¯å’Œå®ç›˜äº¤æ˜“ä¸¤ç§æ¨¡å¼
- **å¤šåˆ¸å•†æ”¯æŒ**ï¼šå…¼å®¹åŒèŠ±é¡ºã€ä¸œæ–¹è´¢å¯Œç­‰ä¸»æµäº¤æ˜“å®¢æˆ·ç«¯
- **å®Œå–„çš„æŒ‡æ ‡**ï¼šæ”¶ç›Šç‡ã€å¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ã€èƒœç‡ç­‰æ ¸å¿ƒæŒ‡æ ‡
- **å®æ—¶ç›‘æ§**ï¼šè‡ªåŠ¨æ£€æµ‹äº¤æ˜“ä¿¡å·å¹¶æ‰§è¡Œä¹°å–

##  é¡¹ç›®ç»“æ„

```markdown:README.md
<code_block_to_apply_changes_from>
é‡åŒ–/
â”œâ”€â”€ config/                    # é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ settings.py           # å…¨å±€é…ç½®ï¼ˆå›æµ‹ã€äº¤æ˜“ã€ç›‘æ§å‚æ•°ï¼‰
â”œâ”€â”€ data/                      # æ•°æ®æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ fetcher.py            # æ•°æ®è·å–å™¨ï¼ˆåŸºäºakshareï¼‰
â”œâ”€â”€ backtest/                  # å›æµ‹æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ engine.py             # å›æµ‹å¼•æ“
â”œâ”€â”€ strategy/                  # ç­–ç•¥æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base.py               # ç­–ç•¥åŸºç±»
â”‚   â””â”€â”€ examples/             # ç­–ç•¥ç¤ºä¾‹
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ ma_cross.py       # å‡çº¿äº¤å‰ç­–ç•¥
â”œâ”€â”€ trader/                    # äº¤æ˜“æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ executor.py           # äº¤æ˜“æ‰§è¡Œå™¨ï¼ˆåŸºäºeasytraderï¼‰
â”œâ”€â”€ monitor/                   # ç›‘æ§æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ realtime.py           # å®æ—¶è¡Œæƒ…ç›‘æ§
â”œâ”€â”€ utils/                     # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ logger.py             # æ—¥å¿—ç®¡ç†
â”œâ”€â”€ logs/                      # æ—¥å¿—ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ main.py                   # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ requirements.txt          # ä¾èµ–åŒ…
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | ç”¨é€” |
|------|------|
| [Hikyuu](https://github.com/fasiondog/hikyuu) | é«˜æ€§èƒ½å›æµ‹æ¡†æ¶ |
| [easytrader](https://github.com/shidenggui/easytrader) | å®ç›˜äº¤æ˜“æ¥å£ |
| [akshare](https://github.com/akfamily/akshare) | Aè‚¡è¡Œæƒ…æ•°æ® |
| [pandas](https://pandas.pydata.org/) | æ•°æ®å¤„ç† |
| [loguru](https://github.com/Delgan/loguru) | æ—¥å¿—ç®¡ç† |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. å›æµ‹æ¨¡å¼

éªŒè¯ç­–ç•¥åœ¨å†å²æ•°æ®ä¸Šçš„è¡¨ç°ï¼š

```bash
# å›æµ‹å•åªè‚¡ç¥¨
python main.py --mode backtest --symbols 000001

# å›æµ‹å¤šåªè‚¡ç¥¨
python main.py --mode backtest --symbols 000001 600519 000858

# å›æµ‹ç»“æœç¤ºä¾‹
# ========================================
# å›æµ‹ç»“æœ - 000001
# ========================================
# æ€»æ”¶ç›Šç‡:       25.32%
# å¹´åŒ–æ”¶ç›Šç‡:     12.15%
# å¤æ™®æ¯”ç‡:        1.25
# æœ€å¤§å›æ’¤:       15.67%
# èƒœç‡:           58.33%
# äº¤æ˜“æ¬¡æ•°:          24
# ========================================
```

### 3. å®ç›˜æ¨¡å¼

è¿æ¥åˆ¸å•†å®¢æˆ·ç«¯è¿›è¡Œè‡ªåŠ¨äº¤æ˜“ï¼š

```bash
# ä½¿ç”¨åŒèŠ±é¡ºå®¢æˆ·ç«¯
python main.py --mode live --symbols 000001 600519 --broker ths

# ä½¿ç”¨ä¸œæ–¹è´¢å¯Œ/å›½é‡‘å®¢æˆ·ç«¯
python main.py --mode live --symbols 000001 --broker gj
```

> âš ï¸ **æ³¨æ„**ï¼šå®ç›˜äº¤æ˜“å‰è¯·ç¡®ä¿ï¼š
> 1. å·²å®‰è£…å¹¶ç™»å½•åˆ¸å•†å®¢æˆ·ç«¯
> 2. å·²åœ¨ `config/settings.py` ä¸­é…ç½®å®¢æˆ·ç«¯è·¯å¾„
> 3. ç­–ç•¥å·²ç»è¿‡å……åˆ†å›æµ‹éªŒè¯

## ğŸ“Š å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        é‡åŒ–äº¤æ˜“å·¥ä½œæµ                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ è·å–æ•°æ®  â”‚â”€â”€â”€â–¶â”‚ ç­–ç•¥å›æµ‹  â”‚â”€â”€â”€â–¶â”‚ éªŒè¯æŒ‡æ ‡  â”‚              â”‚
â”‚  â”‚ akshare  â”‚    â”‚  Hikyuu  â”‚    â”‚ å¤æ™®/å›æ’¤ â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                       â”‚                     â”‚
â”‚                              ç­–ç•¥é€šè¿‡? â”‚                     â”‚
â”‚                                       â–¼                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ æ‰§è¡Œäº¤æ˜“  â”‚â—€â”€â”€â”€â”‚ ä¿¡å·æ£€æµ‹  â”‚â—€â”€â”€â”€â”‚ å®æ—¶ç›‘æ§  â”‚              â”‚
â”‚  â”‚easytraderâ”‚    â”‚  ç­–ç•¥    â”‚    â”‚ akshare  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ è‡ªå®šä¹‰ç­–ç•¥

### åˆ›å»ºæ–°ç­–ç•¥

ç»§æ‰¿ `BaseStrategy` ç±»å¹¶å®ç° `calculate_signals` æ–¹æ³•ï¼š

```python
# strategy/examples/my_strategy.py
from strategy.base import BaseStrategy, Signal, SignalType
import pandas as pd

class MyStrategy(BaseStrategy):
    """æˆ‘çš„è‡ªå®šä¹‰ç­–ç•¥"""
    
    def __init__(self, param1: int = 10):
        super().__init__(
            name="MyStrategy",
            params={"param1": param1}
        )
        self.param1 = param1
    
    def calculate_signals(self, data: pd.DataFrame, symbol: str) -> Signal:
        """
        è®¡ç®—äº¤æ˜“ä¿¡å·
        
        Args:
            data: åŒ…å« open, high, low, close, volume çš„DataFrame
            symbol: è‚¡ç¥¨ä»£ç 
            
        Returns:
            Signal: äº¤æ˜“ä¿¡å· (BUY/SELL/HOLD)
        """
        if len(data) < self.param1:
            return Signal(symbol=symbol, signal_type=SignalType.HOLD, price=0)
        
        current_price = data["close"].iloc[-1]
        
        # å®ç°ä½ çš„ç­–ç•¥é€»è¾‘
        # ç¤ºä¾‹ï¼šä»·æ ¼çªç ´Næ—¥é«˜ç‚¹ä¹°å…¥
        if current_price > data["high"].iloc[-self.param1:-1].max():
            return Signal(
                symbol=symbol,
                signal_type=SignalType.BUY,
                price=current_price,
                reason=f"çªç ´{self.param1}æ—¥é«˜ç‚¹"
            )
        
        return Signal(symbol=symbol, signal_type=SignalType.HOLD, price=current_price)
```

### ä½¿ç”¨è‡ªå®šä¹‰ç­–ç•¥

```python
from strategy.examples.my_strategy import MyStrategy

# å›æµ‹
strategy = MyStrategy(param1=20)
run_backtest(symbols=["000001"], strategy=strategy)

# å®ç›˜
run_live_trading(symbols=["000001"], strategy=strategy)
```

## âš™ï¸ é…ç½®è¯´æ˜

ç¼–è¾‘ `config/settings.py` è¿›è¡Œé…ç½®ï¼š

```python
# å›æµ‹é…ç½®
@dataclass
class BacktestConfig:
    start_date: str = "2020-01-01"      # å›æµ‹å¼€å§‹æ—¥æœŸ
    end_date: str = "2024-01-01"        # å›æµ‹ç»“æŸæ—¥æœŸ
    initial_capital: float = 1_000_000  # åˆå§‹èµ„é‡‘
    commission_rate: float = 0.0003     # ä½£é‡‘è´¹ç‡ï¼ˆä¸‡ä¸‰ï¼‰
    slippage: float = 0.001             # æ»‘ç‚¹

# äº¤æ˜“é…ç½®
@dataclass
class TradingConfig:
    broker: BrokerType = BrokerType.TONGHUASHUN  # åˆ¸å•†ç±»å‹
    exe_path: str = ""                           # å®¢æˆ·ç«¯è·¯å¾„
    max_position_pct: float = 0.3                # å•åªè‚¡ç¥¨æœ€å¤§ä»“ä½

# ç›‘æ§é…ç½®
@dataclass
class MonitorConfig:
    refresh_interval: int = 3                    # è¡Œæƒ…åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰
    trading_hours: tuple = (("09:30", "11:30"), ("13:00", "15:00"))
```

## ğŸ“ˆ å†…ç½®ç­–ç•¥

### 1. å‡çº¿äº¤å‰ç­–ç•¥ (MACrossStrategy)

ç»å…¸çš„åŒå‡çº¿äº¤å‰ç­–ç•¥ï¼š

- **ä¹°å…¥ä¿¡å·**ï¼šçŸ­æœŸå‡çº¿ä¸Šç©¿é•¿æœŸå‡çº¿ï¼ˆé‡‘å‰ï¼‰
- **å–å‡ºä¿¡å·**ï¼šçŸ­æœŸå‡çº¿ä¸‹ç©¿é•¿æœŸå‡çº¿ï¼ˆæ­»å‰ï¼‰

```python
from strategy.examples.ma_cross import MACrossStrategy

# 5æ—¥å‡çº¿ä¸20æ—¥å‡çº¿äº¤å‰
strategy = MACrossStrategy(short_period=5, long_period=20)
```

## ğŸ”® åç»­æ‰©å±•è®¡åˆ’

- [ ] æ›´å¤šç­–ç•¥æ¨¡æ¿ï¼ˆMACDã€å¸ƒæ—å¸¦ã€RSIç­‰ï¼‰
- [ ] é£æ§æ¨¡å—ï¼ˆæ­¢æŸã€æ­¢ç›ˆã€ä»“ä½ç®¡ç†ï¼‰
- [ ] æ¶ˆæ¯é€šçŸ¥ï¼ˆå¾®ä¿¡ã€é‚®ä»¶ã€é’‰é’‰æ¨é€ï¼‰
- [ ] Webç•Œé¢ï¼ˆå®æ—¶ç›‘æ§é¢æ¿ï¼‰
- [ ] å¤šå› å­é€‰è‚¡æ¨¡å—
- [ ] æœºå™¨å­¦ä¹ ç­–ç•¥æ”¯æŒ
- [ ] æ•°æ®åº“å­˜å‚¨ï¼ˆå†å²æ•°æ®ã€äº¤æ˜“è®°å½•ï¼‰

## âš ï¸ å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚è‚¡å¸‚æœ‰é£é™©ï¼ŒæŠ•èµ„éœ€è°¨æ…ã€‚ä½¿ç”¨æœ¬ç³»ç»Ÿè¿›è¡Œå®ç›˜äº¤æ˜“æ‰€äº§ç”Ÿçš„ä»»ä½•æŸå¤±ï¼Œä½œè€…ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼